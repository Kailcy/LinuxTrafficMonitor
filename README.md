# ğŸ“Š Linux Server Traffic Monitor & Monthly Report
# Linux æœåŠ¡å™¨æµé‡ç›‘æ§ä¸æœˆæŠ¥ç³»ç»Ÿ (vnStat + Postfix + 163 SMTP)

è¿™æ˜¯ä¸€ä¸ªè½»é‡çº§çš„ Linux æœåŠ¡å™¨æµé‡ç›‘æ§è„šæœ¬ã€‚å®ƒä¼šè‡ªåŠ¨å®‰è£…é…ç½® `vnStat` è¿›è¡Œæµé‡ç»Ÿè®¡ï¼Œå¹¶æ¯æœˆè‡ªåŠ¨ç”Ÿæˆç²¾ç¾çš„ HTML æŠ¥è¡¨ï¼ˆé™„å¸¦ CSV æ•°æ®æ–‡ä»¶ï¼‰ï¼Œé€šè¿‡ 163 é‚®ç®±çš„ SMTP æœåŠ¡å‘é€åˆ°ä½ çš„æŒ‡å®šé‚®ç®±ã€‚

![License](https://img.shields.io/badge/license-MIT-blue.svg)
![OS](https://img.shields.io/badge/OS-Debian%20%7C%20Ubuntu-orange.svg)

## âœ¨ åŠŸèƒ½ç‰¹ç‚¹

* **å…¨è‡ªåŠ¨å®‰è£…**ï¼šä¸€é”®å®‰è£…ä¾èµ– (vnStat, Postfix, jq, bc) å¹¶å®Œæˆé…ç½®ã€‚
* **ç²¾å‡†ç»Ÿè®¡**ï¼šåŸºäº `vnStat` è·å–ç½‘å¡æµé‡æ•°æ® (JSON è§£æï¼Œæ”¯æŒ GB/TB è‡ªåŠ¨æ¢ç®—)ã€‚
* **HTML é‚®ä»¶æŠ¥è¡¨**ï¼šæ¯æœˆè‡ªåŠ¨å‘é€åŒ…å«æµé‡è¡¨æ ¼çš„ HTML é‚®ä»¶ï¼Œæ‰‹æœº/PC é˜…è¯»ä½“éªŒæä½³ã€‚
* **CSV é™„ä»¶**ï¼šéšé‚®ä»¶é™„å¸¦ CSV æ ¼å¼çš„è¯¦ç»†æ•°æ®ï¼Œä¾¿äºå­˜æ¡£æˆ– Excel åˆ†æã€‚
* **SMTP ä¿®æ­£**ï¼šé’ˆå¯¹ 163 é‚®ç®±ä¸¥æ ¼çš„ååƒåœ¾ç­–ç•¥è¿›è¡Œäº†å¤´éƒ¨ä¼ªè£…ï¼Œç¡®ä¿é‚®ä»¶ä¸è¢«æ‹¦æˆªã€‚

## ğŸ› ï¸ å‡†å¤‡å·¥ä½œ (å¿…è¯»)

åœ¨è¿è¡Œè„šæœ¬ä¹‹å‰ï¼Œä½ éœ€è¦å‡†å¤‡ä»¥ä¸‹ä¸‰é¡¹ä¿¡æ¯ï¼š

1.  **163 å‘ä»¶é‚®ç®±åœ°å€**ï¼šä¾‹å¦‚ `yourname@163.com`
2.  **æ”¶ä»¶äººé‚®ç®±åœ°å€**ï¼šä½ æƒ³æŠŠæŠ¥å‘Šå‘ç»™è°ï¼ˆå¯ä»¥æ˜¯åŒä¸€ä¸ªé‚®ç®±ï¼‰ã€‚
3.  **163 é‚®ç®±æˆæƒç  (é‡è¦)**ï¼š
    * **æ³¨æ„**ï¼šè¿™ä¸æ˜¯ä½ çš„ç½‘é¡µç™»å½•å¯†ç ï¼
    * **è·å–æ–¹æ³•**ï¼š
        1.  ç™»å½•ç½‘é¡µç‰ˆ [163 é‚®ç®±](https://mail.163.com)ã€‚
        2.  ç‚¹å‡»é¡¶éƒ¨ **â€œè®¾ç½®â€** -> **â€œPOP3/SMTP/IMAPâ€**ã€‚
        3.  å¼€å¯ **â€œIMAP/SMTPæœåŠ¡â€** æˆ– **â€œPOP3/SMTPæœåŠ¡â€**ã€‚
        4.  ç³»ç»Ÿä¼šå¼¹å‡ºä¸€ä¸ªçª—å£ï¼Œæ˜¾ç¤ºçš„**ä¸€ä¸²å­—ç¬¦ä¸²**å°±æ˜¯æˆæƒç ã€‚
        5.  *è¯·è®°å½•ä¸‹è¿™ä¸ªæˆæƒç ï¼Œè„šæœ¬è¿è¡Œä¸­éœ€è¦è¾“å…¥ã€‚*

## ğŸš€ å¿«é€Ÿå®‰è£… / Quick Start

ä½¿ç”¨ `wget` ä¸‹è½½å¹¶è¿è¡Œè„šæœ¬ã€‚è¯·ç¡®ä¿ä½ æ‹¥æœ‰ root æƒé™ã€‚

### æ–¹å¼ä¸€ï¼šæ ‡å‡†å®‰è£…ï¼ˆæ¨èï¼‰

```bash
# 1. ä¸‹è½½è„šæœ¬
wget -O install_monitor.sh [https://raw.githubusercontent.com/Chidajiba/LinuxTrafficMonitor/main/install_monitor.sh](https://raw.githubusercontent.com/Chidajiba/LinuxTrafficMonitor/main/install_monitor.sh)

# 2. æ·»åŠ æ‰§è¡Œæƒé™
chmod +x install_monitor.sh

# 3. è¿è¡Œè„šæœ¬
sudo ./install_monitor.sh
````

### æ–¹å¼äºŒï¼šä¸€é”®å®‰è£…ï¼ˆæ‡’äººç‰ˆï¼‰

```bash
wget -qO- [https://raw.githubusercontent.com/Chidajiba/LinuxTrafficMonitor/main/install_monitor.sh](https://raw.githubusercontent.com/Chidajiba/LinuxTrafficMonitor/main/install_monitor.sh) | sudo bash
```

## ğŸ“ ä½¿ç”¨è¯´æ˜

è¿è¡Œè„šæœ¬åï¼Œç»ˆç«¯ä¼šäº¤äº’å¼æç¤ºä½ è¾“å…¥ç›¸å…³ä¿¡æ¯ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š

```text
è¯·è¾“å…¥ 163 å‘ä»¶é‚®ç®±ï¼š xxxxx@163.com
è¯·è¾“å…¥ 163 é‚®ç®±æˆæƒç ï¼š AB12CD34EF56GH78  <-- è¿™é‡Œå¡«æˆæƒç ï¼Œä¸æ˜¯ç™»å½•å¯†ç 
è¯·è¾“å…¥æ”¶ä»¶é‚®ç®±ï¼š boss@example.com
```

### å®‰è£…åçš„éªŒè¯

å®‰è£…å®Œæˆåï¼Œå»ºè®®æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æµ‹è¯•æ˜¯å¦æ­£å¸¸å·¥ä½œï¼š

1.  **æŸ¥çœ‹å®šæ—¶ä»»åŠ¡**ï¼š
    è„šæœ¬ä¼šè‡ªåŠ¨æ·»åŠ  Crontabï¼Œæ¯æœˆ 1 æ—¥å‡Œæ™¨ 00:05 å‘é€æŠ¥å‘Šã€‚

    ```bash
    crontab -l
    # è¾“å‡ºåº”åŒ…å«ï¼š5 0 1 * * /usr/local/bin/vnstat_monthly_report.sh
    ```

2.  **æ‰‹åŠ¨å‘é€æµ‹è¯•æŠ¥å‘Š**ï¼š
    å¦‚æœä½ æƒ³ç«‹å³æ”¶åˆ°ä¸€å°é‚®ä»¶çœ‹çœ‹æ•ˆæœï¼Œå¯ä»¥æ‰‹åŠ¨è¿è¡Œç”Ÿæˆè„šæœ¬ï¼š

    ```bash
    sudo bash /usr/local/bin/vnstat_monthly_report.sh
    ```

    *è¿è¡Œåè¯·æ£€æŸ¥ä½ çš„æ”¶ä»¶ç®±ï¼ˆå¦‚æœä¸æ˜¾ç¤ºï¼Œè¯·æ£€æŸ¥åƒåœ¾é‚®ä»¶ç®±ï¼‰ã€‚*

## ğŸ“‚ æ–‡ä»¶ç»“æ„

  * **`/usr/local/bin/vnstat_monthly_report.sh`**: æ ¸å¿ƒé€»è¾‘è„šæœ¬ï¼Œç”¨äºç”ŸæˆæŠ¥è¡¨å’Œå‘é€é‚®ä»¶ã€‚
  * **`/var/log/vnstat_reports/`**: å­˜æ”¾ç”Ÿæˆçš„ HTML å’Œ CSV å†å²å­˜æ¡£æ–‡ä»¶ã€‚
  * **`/etc/postfix/`**: é‚®ä»¶æœåŠ¡é…ç½®æ–‡ä»¶ã€‚

## âš ï¸ å…¼å®¹æ€§è¯´æ˜

  * **æ”¯æŒç³»ç»Ÿ**ï¼šDebian 10+, Ubuntu 20.04+ (éœ€è¦ `apt` åŒ…ç®¡ç†å™¨)ã€‚
  * **ä¾èµ–**ï¼šè„šæœ¬ä¼šè‡ªåŠ¨å®‰è£… `vnstat`, `postfix`, `mailutils`, `libsasl2-modules`, `bc`, `jq`ã€‚

## ğŸ“„ License

MIT License

```
```
